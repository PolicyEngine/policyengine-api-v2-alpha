# PolicyEngine API v2 - Environment Variables
# Copy this to .env and configure for your environment

# =============================================================================
# SUPABASE (Database & Storage)
# =============================================================================
# For local development: run `supabase start` and use the local URLs
# For production: get these from Supabase Dashboard > Settings > API

# Supabase API URL (NOT the database URL)
SUPABASE_URL=http://127.0.0.1:54321

# Supabase anon/public key (safe to expose in client)
SUPABASE_KEY=your-anon-key

# Supabase service role key (server-side only, never expose)
SUPABASE_SERVICE_KEY=your-service-role-key

# PostgreSQL connection string for direct database access
# For production Supabase: use the "connection string" from Dashboard > Settings > Database
# Format: postgresql://postgres.[project-ref]:[password]@[host]:6543/postgres
SUPABASE_DB_URL=postgresql://postgres:postgres@127.0.0.1:54322/postgres

# =============================================================================
# STORAGE
# =============================================================================
# Supabase storage bucket name for datasets
STORAGE_BUCKET=datasets

# =============================================================================
# API CONFIGURATION
# =============================================================================
API_TITLE=PolicyEngine API
API_VERSION=0.1.0
API_PORT=8000
DEBUG=true

# =============================================================================
# LOGGING (Logfire)
# =============================================================================
# Get token from https://logfire.pydantic.dev
LOGFIRE_TOKEN=
LOGFIRE_ENVIRONMENT=local

# =============================================================================
# AGENT (Claude Code)
# =============================================================================
# Anthropic API key for Claude
ANTHROPIC_API_KEY=sk-ant-...

# Whether to use Modal for agent compute (false = run locally)
AGENT_USE_MODAL=false

# PolicyEngine API URL that the agent will use
POLICYENGINE_API_URL=http://localhost:8000

# =============================================================================
# MODAL SECRETS (for production)
# =============================================================================
# Modal secrets are NOT set via .env - they're managed via Modal CLI:
#
# 1. modal secret create policyengine-db \
#      DATABASE_URL='postgresql://...' \
#      SUPABASE_URL='https://...' \
#      SUPABASE_KEY='...' \
#      SUPABASE_SERVICE_KEY='...' \
#      STORAGE_BUCKET='datasets'
#
# 2. modal secret create anthropic-api-key \
#      ANTHROPIC_API_KEY='sk-ant-...'
#
# 3. modal secret create logfire-token \
#      LOGFIRE_TOKEN='...'
